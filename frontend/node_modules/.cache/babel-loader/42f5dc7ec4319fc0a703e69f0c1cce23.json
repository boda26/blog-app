{"ast":null,"code":"import { createAsyncThunk, createSlice, createAction } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../utils/baseURL\"; //Create Post action\n//action to redirect\n\nconst resetPost = createAction(\"category/reset\");\nexport const createpostAction = createAsyncThunk(\"post/created\", async (post, _ref) => {\n  var _getState;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n  console.log(post); //get user token\n\n  const user = (_getState = getState()) === null || _getState === void 0 ? void 0 : _getState.users;\n  const {\n    userAuth\n  } = user;\n  const config = {\n    headers: {\n      Authorization: `Bearer ${userAuth === null || userAuth === void 0 ? void 0 : userAuth.token}`\n    }\n  };\n\n  try {\n    //http call\n    const formData = new FormData();\n    formData.append(\"title\", post === null || post === void 0 ? void 0 : post.title);\n    formData.append(\"description\", post === null || post === void 0 ? void 0 : post.description);\n    formData.append(\"category\", post === null || post === void 0 ? void 0 : post.category);\n    formData.append(\"image\", post === null || post === void 0 ? void 0 : post.image);\n    const {\n      data\n    } = await axios.post(`${baseUrl}/api/posts`, formData, config); //dispatch action\n\n    dispatch(resetPost());\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error !== null && error !== void 0 && error.response)) throw error;\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n});\nexport const fetchPostsAction = createAsyncThunk(\"post/list\", async (category, _ref2) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n\n  //get user token\n  try {\n    //http call\n    const {\n      data\n    } = await axios.get(`${baseUrl}/api/posts?category=${category}`); //dispatch action\n\n    return data;\n  } catch (error) {\n    var _error$response2;\n\n    if (!(error !== null && error !== void 0 && error.response)) throw error;\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}); //add likes to post\n\nexport const toggleAddLikesToPost = createAsyncThunk('post/like', postO => {}); //slice\n\nconst postSlice = createSlice({\n  name: \"post\",\n  initialState: {},\n  extraReducers: builder => {\n    //creatpost\n    builder.addCase(createpostAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(resetPost, (state, action) => {\n      state.isCreated = true;\n    });\n    builder.addCase(createpostAction.fulfilled, (state, action) => {\n      state.postCreated = action === null || action === void 0 ? void 0 : action.payload;\n      state.loading = false;\n      state.isCreated = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(createpostAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.message;\n    }); //fetch\n\n    builder.addCase(fetchPostsAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchPostsAction.fulfilled, (state, action) => {\n      state.postLists = action === null || action === void 0 ? void 0 : action.payload;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(fetchPostsAction.rejected, (state, action) => {\n      var _action$payload2, _action$error2;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error2 = action.error) === null || _action$error2 === void 0 ? void 0 : _action$error2.message;\n    });\n  }\n});\nexport default postSlice.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","createAction","axios","baseUrl","resetPost","createpostAction","post","rejectWithValue","getState","dispatch","console","log","user","users","userAuth","config","headers","Authorization","token","formData","FormData","append","title","description","category","image","data","error","response","fetchPostsAction","get","toggleAddLikesToPost","postO","postSlice","name","initialState","extraReducers","builder","addCase","pending","state","action","loading","isCreated","fulfilled","postCreated","payload","appErr","undefined","serverErr","rejected","message","postLists","reducer"],"sources":["/Users/bodasong/Desktop/blog/blog-frontend/src/redux/slices/posts/postSlices.js"],"sourcesContent":["import { createAsyncThunk, createSlice, createAction } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nimport { baseUrl } from \"../../../utils/baseURL\";\n\n//Create Post action\n//action to redirect\nconst resetPost = createAction(\"category/reset\");\nexport const createpostAction = createAsyncThunk(\n  \"post/created\",\n  async (post, { rejectWithValue, getState, dispatch }) => {\n    console.log(post);\n    //get user token\n    const user = getState()?.users;\n    const { userAuth } = user;\n    const config = {\n      headers: {\n        Authorization: `Bearer ${userAuth?.token}`,\n      },\n    };\n    try {\n      //http call\n      const formData = new FormData();\n      formData.append(\"title\", post?.title);\n      formData.append(\"description\", post?.description);\n      formData.append(\"category\", post?.category);\n      formData.append(\"image\", post?.image);\n\n      const { data } = await axios.post(\n        `${baseUrl}/api/posts`,\n        formData,\n        config\n      );\n      //dispatch action\n      dispatch(resetPost());\n      return data;\n    } catch (error) {\n      if (!error?.response) throw error;\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\nexport const fetchPostsAction = createAsyncThunk(\n  \"post/list\",\n  async (category, { rejectWithValue, getState, dispatch }) => {\n    //get user token\n    try {\n      //http call\n      const { data } = await axios.get(\n        `${baseUrl}/api/posts?category=${category}`,\n      );\n      //dispatch action\n      return data;\n    } catch (error) {\n      if (!error?.response) throw error;\n      return rejectWithValue(error?.response?.data);\n    }\n  }\n);\n\n//add likes to post\nexport const toggleAddLikesToPost = createAsyncThunk(\n  'post/like', (postO) => {\n\n})\n\n//slice\nconst postSlice = createSlice({\n  name: \"post\",\n  initialState: {},\n  extraReducers: builder => {\n    //creatpost\n    builder.addCase(createpostAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(resetPost, (state, action) => {\n      state.isCreated = true;\n    });\n    builder.addCase(createpostAction.fulfilled, (state, action) => {\n      state.postCreated = action?.payload;\n      state.loading = false;\n      state.isCreated = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(createpostAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.message;\n      state.serverErr = action?.error?.message;\n    });\n    //fetch\n    builder.addCase(fetchPostsAction.pending, (state, action) => {\n      state.loading = true;\n    });\n    builder.addCase(fetchPostsAction.fulfilled, (state, action) => {\n      state.postLists = action?.payload;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(fetchPostsAction.rejected, (state, action) => {\n      state.loading = false;\n      state.appErr = action?.payload?.message;\n      state.serverErr = action?.error?.message;\n    });\n  },\n});\n\nexport default postSlice.reducer;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}