{"ast":null,"code":"import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { baseUrl } from '../../../utils/baseURL'; //register action\n\nexport const registerUserAction = createAsyncThunk('users/register', async (user, _ref) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref;\n\n  try {\n    //http call\n    const config = {\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    const {\n      data\n    } = await axios.post(`${baseUrl}/api/users/register`, user, config);\n    return data;\n  } catch (error) {\n    var _error$response;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.data);\n  }\n}); //login\n\nexport const loginUserAction = createAsyncThunk('user/login', async (userData, _ref2) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref2;\n  const config = {\n    headers: {\n      'Content-Type': \"application/json\"\n    }\n  };\n\n  try {\n    //make http call\n    const {\n      data\n    } = await axios.post(`${baseUrl}/api/users/login`, userData, config); //save user in local storage\n\n    localStorage.setItem('userInfo', JSON.stringify(data));\n    return data;\n  } catch (error) {\n    var _error$response2;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.data);\n  }\n}); //profile\n\nexport const userProfileAction = createAsyncThunk('user/profile', async (id, _ref3) => {\n  var _getState;\n\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref3;\n  //get user token\n  const user = (_getState = getState()) === null || _getState === void 0 ? void 0 : _getState.users;\n  const {\n    userAuth\n  } = user;\n  const config = {\n    headers: {\n      Authorization: `Bearer ${userAuth === null || userAuth === void 0 ? void 0 : userAuth.token}`\n    }\n  }; //http call\n\n  try {\n    const {\n      data\n    } = await axios.get(`${baseUrl}/api/users/profile/${id}`, config);\n    return data;\n  } catch (error) {\n    var _error$response3;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response3 = error.response) === null || _error$response3 === void 0 ? void 0 : _error$response3.data);\n  }\n}); //logout action\n\nexport const logoutAction = createAsyncThunk('/user/logout', async (payload, _ref4) => {\n  let {\n    rejectWithValue,\n    getState,\n    dispatch\n  } = _ref4;\n\n  try {\n    localStorage.removeItem('userInfo');\n  } catch (error) {\n    var _error$response4;\n\n    if (!(error !== null && error !== void 0 && error.response)) {\n      throw error;\n    }\n\n    return rejectWithValue(error === null || error === void 0 ? void 0 : (_error$response4 = error.response) === null || _error$response4 === void 0 ? void 0 : _error$response4.data);\n  }\n}); //get user from local storage and place into store\n\nconst userLoginFromStorage = localStorage.getItem('userInfo') ? JSON.parse(localStorage.getItem('userInfo')) : null; //slices\n\nconst usersSlices = createSlice({\n  name: 'users',\n  initialState: {\n    userAuth: userLoginFromStorage\n  },\n  extraReducers: builder => {\n    //register\n    builder.addCase(registerUserAction.pending, (state, action) => {\n      state.loading = true;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(registerUserAction.fulfilled, (state, action) => {\n      state.loading = false;\n      state.registered = action === null || action === void 0 ? void 0 : action.payload;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(registerUserAction.rejected, (state, action) => {\n      var _action$payload, _action$error;\n\n      state.loading = false;\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error = action.error) === null || _action$error === void 0 ? void 0 : _action$error.message;\n    }); //login\n\n    builder.addCase(loginUserAction.pending, (state, action) => {\n      state.loading = true;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(loginUserAction.fulfilled, (state, action) => {\n      state.userAuth = action === null || action === void 0 ? void 0 : action.payload;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(loginUserAction.rejected, (state, action) => {\n      var _action$payload2, _action$error2;\n\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error2 = action.error) === null || _action$error2 === void 0 ? void 0 : _action$error2.message;\n      state.loading = false;\n    }); //logout\n\n    builder.addCase(logoutAction.pending, (state, action) => {\n      state.loading = false;\n    });\n    builder.addCase(logoutAction.fulfilled, (state, action) => {\n      state.userAuth = undefined;\n      state.loading = false;\n      state.appErr = undefined;\n      state.serverErr = undefined;\n    });\n    builder.addCase(logoutAction.rejected, (state, action) => {\n      var _action$payload3, _action$error3;\n\n      state.appErr = action === null || action === void 0 ? void 0 : (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.message;\n      state.serverErr = action === null || action === void 0 ? void 0 : (_action$error3 = action.error) === null || _action$error3 === void 0 ? void 0 : _action$error3.message;\n      state.loading = false;\n    });\n  }\n});\nexport default usersSlices.reducer;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","baseUrl","registerUserAction","user","rejectWithValue","getState","dispatch","config","headers","data","post","error","response","loginUserAction","userData","localStorage","setItem","JSON","stringify","userProfileAction","id","users","userAuth","Authorization","token","get","logoutAction","payload","removeItem","userLoginFromStorage","getItem","parse","usersSlices","name","initialState","extraReducers","builder","addCase","pending","state","action","loading","appErr","undefined","serverErr","fulfilled","registered","rejected","message","reducer"],"sources":["/Users/bodasong/Desktop/blog/blog-frontend/src/redux/slices/users/userSlices.js"],"sourcesContent":["import {createAsyncThunk, createSlice} from '@reduxjs/toolkit';\nimport axios from 'axios';\nimport { baseUrl } from '../../../utils/baseURL';\n\n//register action\nexport const registerUserAction = createAsyncThunk(\n    'users/register',\n    async (user, {rejectWithValue, getState, dispatch}) => {\n        try {\n            //http call\n            const config = {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            };\n            const {data} = await axios.post(\n                `${baseUrl}/api/users/register`,\n                user,\n                config\n            );\n            return data;\n        } catch (error) {\n            if (!error?.response) {\n                throw error;\n            }\n            return rejectWithValue(error?.response?.data);\n        }\n    }\n);\n\n//login\nexport const loginUserAction = createAsyncThunk(\n    'user/login',\n    async (userData, {rejectWithValue, getState, dispatch}) => {\n        const config = {\n            headers: {\n                'Content-Type': \"application/json\",\n            },\n        };\n        try {\n            //make http call\n            const {data} = await axios.post(\n                `${baseUrl}/api/users/login`,\n                userData,\n                config\n            );\n            //save user in local storage\n            localStorage.setItem('userInfo', JSON.stringify(data));\n            return data;\n        } catch (error) {\n            if (!error?.response) {\n                throw error;\n            }\n            return rejectWithValue(error?.response?.data);\n        }\n    }\n);\n\n//profile\nexport const userProfileAction = createAsyncThunk(\n    'user/profile',\n    async (id, {rejectWithValue, getState, dispatch}) => {\n        //get user token\n        const user = getState()?.users;\n        const {userAuth} = user;\n        const config = {\n            headers: {\n                Authorization: `Bearer ${userAuth?.token}`,\n            },\n        }\n        //http call\n        try {\n            const {data} = await axios.get(`${baseUrl}/api/users/profile/${id}`,\n            config\n            );\n            return data;\n        } catch (error) {\n            if (!error?.response) {\n                throw error;\n            }\n            return rejectWithValue(error?.response?.data);\n        }\n    }\n);\n\n//logout action\nexport const logoutAction = createAsyncThunk(\n    '/user/logout',\n    async (payload, {rejectWithValue, getState, dispatch}) => {\n        try {\n            localStorage.removeItem('userInfo');\n        } catch (error) {\n            if (!error?.response) {\n                throw error;\n            }\n            return rejectWithValue(error?.response?.data);\n        }\n    }\n);\n\n//get user from local storage and place into store\nconst userLoginFromStorage = localStorage.getItem('userInfo')\n    ? JSON.parse(localStorage.getItem('userInfo'))\n    : null;\n\n//slices\nconst usersSlices = createSlice({\n    name: 'users',\n    initialState: {\n        userAuth: userLoginFromStorage\n    },\n    extraReducers: (builder) => {\n        //register\n        builder.addCase(registerUserAction.pending, (state, action) => {\n            state.loading = true;\n            state.appErr = undefined;\n            state.serverErr = undefined;\n        });\n        builder.addCase(registerUserAction.fulfilled, (state, action) => {\n            state.loading = false;\n            state.registered = action?.payload;\n            state.appErr = undefined;\n            state.serverErr = undefined;\n        });\n        builder.addCase(registerUserAction.rejected, (state, action) => {\n            state.loading = false;\n            state.appErr = action?.payload?.message;\n            state.serverErr = action?.error?.message;\n        });\n\n        //login\n        builder.addCase(loginUserAction.pending, (state, action) => {\n            state.loading = true;\n            state.appErr = undefined;\n            state.serverErr = undefined;\n        });\n        builder.addCase(loginUserAction.fulfilled, (state, action) => {\n            state.userAuth = action?.payload;\n            state.loading = false;\n            state.appErr = undefined;\n            state.serverErr = undefined;\n        });\n        builder.addCase(loginUserAction.rejected, (state, action) => {\n            state.appErr = action?.payload?.message;\n            state.serverErr = action?.error?.message;\n            state.loading = false;\n        });\n\n        //logout\n        builder.addCase(logoutAction.pending, (state, action) => {\n            state.loading = false;\n        });\n        builder.addCase(logoutAction.fulfilled, (state, action) => {\n            state.userAuth = undefined;\n            state.loading = false;\n            state.appErr = undefined;\n            state.serverErr = undefined;\n        });\n        builder.addCase(logoutAction.rejected, (state, action) => {\n            state.appErr = action?.payload?.message;\n            state.serverErr = action?.error?.message;\n            state.loading = false;\n        });\n    }\n});\n\nexport default usersSlices.reducer;"],"mappings":"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"},"metadata":{},"sourceType":"module"}